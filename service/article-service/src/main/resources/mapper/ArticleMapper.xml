<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fzdkx.article.mapper.ArticleMapper">
    <update id="updateStaticUrl">
        update ap_article
        set static_url = #{apArticle.staticUrl}
        where id = #{apArticle.id}
    </update>

    <select id="loadArticleList" resultType="com.fzdkx.model.article.bean.ApArticle">
        select * from ap_article aa
        left join ap_article_config aac on aa.id = aac.article_id
        <where>
            aac.is_delete != 1
            and aac.is_down != 1
            <if test="loadType != null and loadType == 1">
                and aa.publish_time &lt;= #{apArticleHomeDto.minBehotTime}
            </if>
            <if test="loadType != null and loadType == 0">
                and aa.publish_time &gt;= #{apArticleHomeDto.maxBehotTime}
            </if>
            <if test="apArticleHomeDto.tag != '__all__' ">
                and aa.channel_id = #{apArticleHomeDto.tag}
            </if>
        </where>
        order by aa.publish_time desc
        limit #{apArticleHomeDto.size}
    </select>
</mapper>